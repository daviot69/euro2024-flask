{% extends 'base.html' %}

{% block content %}
  {% for message in get_flashed_messages() %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
  <h1>Predictions</h1>
  <p>You can make as many changes up until the start of the Opening Match</p>
  <p>After that you will only be able to change your Wildcard Team (A maximum of two times)</p>
<br/>
  <h2>General Predictions</h2>
  <form method="POST" action="">
    {{ form.hidden_tag() }}
    {{ form.total_goals.label(class="form-label") }}
    {{ form.total_goals(class="form-control-sm") }}
    <br/>
    <br/>
    <input type="submit" class="btn btn-secondary" value="Update Predictions" />
    <br/>
    <br/>
  <h2>Group Matches</h2>

  {% if entry_found %}

    {% for nested in form.prediction %}

        <ul class="list-group list-group-horizontal">
          <li class="list-group-item score_label_left">{{ match_details[loop.index -1].match.home_country.country_name }}</li>
          <li class="list-group-item">{{ nested.home_score(class="form-control-sm score_input") }}</li>
          <li class="list-group-item">{{ nested.away_score(class="form-control-sm score_input") }}</li>
          <li class="list-group-item score_label_right">{{ match_details[loop.index -1].match.away_country.country_name }}</li>
        </ul>

    {% endfor %}

    <br/>

    <input type="submit" class="btn btn-secondary" value="Update Predictions" />
    <br/>
    <br/>
    </form>
  {% else %}

    <a href="{{ url_for('initialise_predictions') }}" class="btn btn-secondary btn-lg" role="button">Click To Initialise Your Predictions</a>

  {% endif %}
{% endblock %}